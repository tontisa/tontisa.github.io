<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>滚动定位</title>
<link rel="stylesheet" href="/static/style/reset.css">
<link rel="stylesheet" href="css/scroll_listen.css">
<style>
html,body{
	width:100%;
}
ul{
	list-style:none;
}
h3{
	font-family:"Microsoft YaHei";
}
.clearfix:after{
	display:block;
	visibility:hidden;
	clear:both;
	content:"";
}
.clearfix{
	zoom: 1; 
}
.hide{
	display:none;
}
.left-contrl{
	position: fixed; 
	top: 0; left: 0; 
	float: left;
	width: 200px;
	height:100%; 
	padding:20px; 
	border-right:1px solid #ccc; 
	background-color: #fff;
}
.tab{ height: 30px; padding-left: 10px; border-bottom: 1px solid #ccc; margin-bottom: 20px;}
.tab li{ float: left; height: 30px; line-height: 30px; padding:0 10px; background-color: #fff; color: #999; font-size: 13px; cursor: pointer; }
.tab li:hover{ color: #666; }
.tab li.active{ position: relative; top: 0; border:1px solid #ccc; border-radius: 3px 3px 0 0; border-bottom: 0; color: #333; }

.form-filter{ margin-bottom: 20px; }
.form-filter .form-item{ height: 30px; line-height: 30px; margin-bottom: 5px; }
.form-filter .form-item label{ float: left; width: 7em; height: 30px; line-height: 30px; text-align: right; }
.form-filter .form-item input{ width: 100px; height: 18px; padding:2px;}

.right-content{
	margin-left:240px;
	padding:20px;
}
.right-content .vertical {
	position:fixed;
	width:120px;
	top:50%;
	margin-top:-120px;
	right:20px;
}
.right-content .horizontal{
	position:fixed;
	top:0;
	margin-left:-180px;
	left:50%;
}
.right-content .vertical .nav-list{
	float:none;
}
.right-content .horizontal .nav-list{
	float:left;
}

.code{ display: block; width: 95%; padding:10px; border:1px solid #e1e1e8; border-radius:5px; margin:10px; background-color: #f7f7f9; font-size: 13px; line-height: 20px; color: #333; font-family: 'Microsoft Yahei';}


</style>
</head>
<body>
	<div class="left-contrl">
		<ul class="tab" id="tab">
			<li class="active" data-anchor="preview">preview</li>
			<li data-anchor="html">html</li>
			<li data-anchor="css">css</li>
			<li data-anchor="js">js</li>
		</ul>
		<form class="form-filter" action="">
		<div class="form-item">
		<label for="">导航方向：</label>
			<select name="" id="column">
				<option value="0">横向导航</option>
				<option value="1">垂直导航</option>
				
			</select>
		</div>
		
		
	</form>
	</div>
	<div class="right-content">
		<div id="preview" class="m-scroll">
			<div class="banner">
				<img src="img/img.jpg" alt="">
			</div>
			<ul class="nav-box clearfix" id="nav_box">
				<li class="nav-list"><a href="#section-1" class="active">section-1</a></li>
				<li class="nav-list"><a href="#section-2">section-2</a></li>
				<li class="nav-list"><a href="#section-3">section-3</a></li>
				<li class="nav-list"><a href="#section-4">section-4</a></li>
				<li class="nav-list"><a href="#section-5">section-5</a></li>
			</ul>
			<div class="body">
				<div class="sec-1" id="section-1">
					<h3>This is section-1</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-2" id="section-2">
					<h3>This is section-2</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-3" id="section-3">
					<h3>This is section-3</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-4" id="section-4">
					<h3>This is section-4</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-5" id="section-5">
					<h3>This is section-5</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
			</div>
		</div>

		<div id="html" class="hide">
			<textarea cols="100" rows="25" class="code">
				<div class="banner">
				<img src="img/img.jpg" alt="">
			</div>
			<ul class="nav-box clearfix" id="nav_box">
				<li class="nav-list"><a href="#section-1" class="active">section-1</a></li>
				<li class="nav-list"><a href="#section-2">section-2</a></li>
				<li class="nav-list"><a href="#section-3">section-3</a></li>
				<li class="nav-list"><a href="#section-4">section-4</a></li>
				<li class="nav-list"><a href="#section-5">section-5</a></li>
			</ul>
			<div class="body">
				<div class="sec-1" id="section-1">
					<h3>This is section-1</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-2" id="section-2">
					<h3>This is section-2</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-3" id="section-3">
					<h3>This is section-3</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-4" id="section-4">
					<h3>This is section-4</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
				<div class="sec-5" id="section-5">
					<h3>This is section-5</h3>
					<div class="content">
						<img src="img/img.jpg" alt="">
						<p>四面佛：又叫“有求必应佛”。泰国最有名之四面佛位于泰国曼谷的四面佛坛是泰国香火最鼎盛的宗教据点之一，在曼谷市中心爱侣湾的 Ratchadamri 路和 Phloen Chit 路交界，邻近君悦酒店和崇光百货（备注：整个泰国有三万多家寺庙，因地段等事宜，本行程选择参观距离芭堤雅约30分钟车程的四面佛）。四面佛是印度婆罗门教神祇，原是婆罗门教三大主神之一的梵天，是创造天地之神。</p>
					</div>
				</div>
			</div>
			</textarea>	
		</div>

		<div id="css" class="hide">
		<textarea cols="100" rows="25" class="code">
.banner{
	width:1000px;
	margin:0 auto;
}
.banner img{
	width:1000px;
	height:300px;
	display:block;
	margin:20px auto;
}
.container{
	width:100%;
	margin:0 auto;
	background-color:#eee;
}
.nav-box{
	width:600px;
	margin:0 auto;
	background-color:#000;
	list-style:none;
}
.nav-list{
	width:120px;
	height:40px;
	line-height:40px;
	text-align:center;
	float:left;
}
.nav-list a{
	display:block;
	width:120px;
	height:40px;	
	text-align:center;
	font-family:"Microsoft YaHei";
	font-size:18px;
	color:#fff;
	text-decoration:none;
}
.nav-list a.active{
	background-color:#E70;
}
.nav-list a:hover{
	color:#28bc16;
}
.m-scroll .body{
	margin-top:20px;
}
.sec-1,.sec-2,.sec-3,.sec-4,.sec-5{
	width:100%;
	height:500px;
	padding:10px 0;
	text-align:center;
}
.sec-1{background-color:#03AEDA;}
.sec-2{background-color:#88B33E;}
.sec-3{background-color:#4395B8;}
.sec-4{background-color:#5FC79C;}
.sec-5{background-color:#7CAFEC;}
.sec-1 h3,.sec-2 h3,.sec-3 h3,.sec-4 h3,.sec-5 h3{
	line-height:36px;
	margin:10px auto;
	color:#fff;
}
.sec-5{
	margin-bottom:500px;
}
.content {
	width:600px;
	margin:0 auto;
}
.content p{
	font-size:14px;
	line-height:1.5em;
	margin-top:20px;
}
		</textarea>		
	</div>

	<div id="js" class="hide">
		<textarea cols="100" rows="25" class="code">
var ele = $("#nav_box");
	var pos = ele.offset().top;

	var sec = function(index){
		if(index == 0){
			return 0;
		}else{
			return $(".sec-" + index).offset().top - 2*$("#nav_box").height() + $(".sec-" + index).height();
		}
	}
	
	var direction = function(d){
		if(d == 1){
			$("#nav_box").removeClass("horizontal");
			$("#nav_box").addClass("vertical");
		}else{
			$("#nav_box").removeClass("vertical");
		}
	};
	$("#column").change(function(){
		var d = $("#column").val();
		console.log(d);
		direction(d);
	});

	$(".nav-list a").click(function(){
		// subNav_scroll($(this));
		var target = $(this).attr("href");
		var targetScroll = $(target).offset().top - 20;
		$("html,body").animate({scrollTop:targetScroll},300);
		return false;
	});

	$.event.add(window,'scroll',function(){
		var p = $(window).scrollTop();
		if($("#column").val() == 0){
			if( p >= pos){
				ele.addClass("horizontal");
			}else{
				ele.removeClass("horizontal");
			}
		}
		
		

		for(var i = 0; i < $(".nav-list").length; i++){
			if(p <= sec(i+1) && p > sec(i)){
				$(".nav-list").find('a').removeClass('active');
				$($(".nav-list")[i]).find('a').addClass('active');
			}
		}
	})
		</textarea>	
	</div>

	</div>
<script src="/static/lib/jquery-1.8.3.min.js"></script>
<script>
$(function(){
	var clientHeight = document.documentElement.clientHeight || document.body.clientHeight;
	$('.aside-left').height(clientHeight-40);
	var tab = $('#tab'),
		tabItm = tab.find('li');
	tabItm.on('click',function(){
		var anchor = $(this).attr('data-anchor');
		$(this).addClass('active').siblings().removeClass('active');
		$('#'+anchor).show().siblings().hide();
	});

	var ele = $("#nav_box");
	var pos = ele.offset().top;

	var sec = function(index){
		if(index == 0){
			return 0;
		}else{
			return $(".sec-" + index).offset().top - 2*$("#nav_box").height() + $(".sec-" + index).height();
		}
	}
	
	var direction = function(d){
		if(d == 1){
			$("#nav_box").removeClass("horizontal");
			$("#nav_box").addClass("vertical");
		}else{
			$("#nav_box").removeClass("vertical");
		}
	};
	$("#column").change(function(){
		var d = $("#column").val();
		console.log(d);
		direction(d);
	});

	$(".nav-list a").click(function(){
		// subNav_scroll($(this));
		var target = $(this).attr("href");
		var targetScroll = $(target).offset().top - 20;
		$("html,body").animate({scrollTop:targetScroll},300);
		return false;
	});

	$.event.add(window,'scroll',function(){
		var p = $(window).scrollTop();
		if($("#column").val() == 0){
			if( p >= pos){
				ele.addClass("horizontal");
			}else{
				ele.removeClass("horizontal");
			}
		}
		
		

		for(var i = 0; i < $(".nav-list").length; i++){
			if(p <= sec(i+1) && p > sec(i)){
				$(".nav-list").find('a').removeClass('active');
				$($(".nav-list")[i]).find('a').addClass('active');
			}
		}
	})
})
</script>
</body>
</html>